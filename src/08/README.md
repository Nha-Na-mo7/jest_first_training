# No.8 モックを使用したテストを書いてみよう - スパイ編

## 目標
- スパイの目的がわかる
- スパイを使った基本的なテストがかける
- `jest.fn`と`jest.spyOn`を適切に使用できる

## 課題
1. 

## 概要
- スパイ(spies)は、「記録」を行うことを目的としている。
  - 関数やメソッドの呼び出しそのものを記録し、呼び出された回数や、どの引数を持って呼び出されたかなどを記録する。
  - 関数の出力を確認することにも使える。
  - 関数引数のコールバック関数などを監視対象にすれば、意図通りに呼び出されたか、その際の引数はどうであったかなどを検証できる。

- `jest.fn`: 新しいモック関数を生成する。
  - 何かしらの適当な関数を用意したい時や、呼び出された際の動きを確認したい場合に使用する。
- `jest.spyOn`: 第一引数に指定したオブジェクトのうち、第二引数に指定した関数をモック関数として監視することができる。
  - `jest.spyOn`では関数そのものの使われ方(呼び出され方や呼ばれた回数など)を確認したい時に使用する。
  - 必要な時は独自の実装を提供することも可能。

- 前章の`jest.mock`は、モジュール全体をモックするための関数である。

- 一度モック化させた関数は、該当のテストが終わってもモック化されたままとなる。
  - 別のテストが実行されてもモック化は続いていることになる。
  - 別のテストで同じ関数を利用したい場合、モックの初期化、または上書き処理が必要。